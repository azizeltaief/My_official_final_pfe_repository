'use strict';

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactDom = require('react-dom');

var _balajs = require('balajs');

var _balajs2 = _interopRequireDefault(_balajs);

var _configureStore = require('./store/configureStore');

var _configureStore2 = _interopRequireDefault(_configureStore);

var _Root = require('./components/Root');

var _Root2 = _interopRequireDefault(_Root);

var _actions = require('./actions');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Wrap = void 0;

if (process.env.NODE_ENV === 'development') {
    // eslint-disable-next-line global-require
    Wrap = require('react-hot-loader').AppContainer;
} else {
    Wrap = function Wrap(_ref) {
        var children = _ref.children;
        return children;
    };
}

module.exports = function githubEmbed(node, pathToSettings) {
    var store = (0, _configureStore2.default)();

    store.dispatch((0, _actions.initialize)(pathToSettings));

    (0, _reactDom.render)(_react2.default.createElement(
        Wrap,
        null,
        _react2.default.createElement(_Root2.default, { store: store })
    ), _balajs2.default.one(node));

    if (module.hot) {
        module.hot.accept('./components/Root', function () {
            // eslint-disable-next-line global-require
            var RootContainer = require('./components/Root').default;

            (0, _reactDom.render)(_react2.default.createElement(
                Wrap,
                null,
                _react2.default.createElement(RootContainer, { store: store })
            ), _balajs2.default.one(node));
        });
    }
};
;

var _temp = function () {
    if (typeof __REACT_HOT_LOADER__ === 'undefined') {
        return;
    }

    __REACT_HOT_LOADER__.register(Wrap, 'Wrap', 'src/index.js');
}();

;